cmake_minimum_required(VERSION 3.22)
set(CMAKE_CXX_STANDARD 17)

project(Ship)

add_executable(Ship src/Launcher.cpp src/main/Main.cpp src/main/Main.hpp src/utils/threads/ThreadPool.cpp src/utils/threads/ThreadPool.hpp src/protocol/packets/Packet.hpp src/protocol/handlers/PacketHandler.hpp src/network/listener/Listener.hpp src/network/listener/EpollListener.cpp src/protocol/ByteBuffer.cpp src/protocol/ProtocolVersion.cpp src/protocol/Protocol.hpp src/network/pipe/Pipe.hpp src/protocol/packets/handshake/Handshake.hpp src/protocol/registry/PacketRegistry.cpp src/protocol/data/nbt/NBT.hpp src/protocol/data/nbt/NBT.cpp src/protocol/data/nbt/EndTag.cpp src/protocol/data/nbt/StringTag.cpp src/network/pipe/FramedByteBytePipe.cpp src/network/pipe/FramedPipe.hpp src/network/pipe/minecraft/CompressionPipe.cpp src/network/pipe/minecraft/MinecraftPipe.hpp src/utils/exceptions/InvalidArgumentException.hpp src/utils/exceptions/Exception.hpp src/network/pipe/minecraft/MinecraftFramedBytePacketPipe.cpp src/network/pipe/FramedBytePacketPipe.cpp src/network/Connection.cpp src/network/Connection.hpp src/protocol/registry/PacketRegistry.hpp src/utils/ordinal/OrdinalRegistry.cpp src/utils/ordinal/OrdinalRegistry.hpp src/protocol/packets/status/StatusRequest.hpp src/protocol/packets/status/StatusResponse.hpp src/protocol/packets/status/StatusPing.hpp src/protocol/packets/login/LoginDisconnect.hpp src/protocol/packets/login/EncryptionRequest.hpp src/protocol/packets/login/EncryptionResponse.hpp src/protocol/packets/login/LoginSuccess.hpp src/protocol/packets/login/SetCompression.hpp src/protocol/packets/login/LoginStart.hpp src/protocol/packets/play/SpawnEntity.hpp src/protocol/packets/play/SpawnExperienceOrb.hpp src/protocol/packets/play/SpawnPlayer.hpp src/protocol/packets/play/EntityAnimation.hpp src/protocol/packets/play/AwardStatistics.hpp src/protocol/packets/play/AcknowledgeBlockChange.hpp src/protocol/packets/play/BlockDestroyStage.hpp src/protocol/packets/play/BlockEntityData.hpp src/protocol/packets/play/BlockAction.hpp src/protocol/packets/play/BlockUpdate.hpp src/protocol/packets/play/BossBar.hpp src/protocol/packets/play/ServerChangeDifficulty.hpp src/protocol/packets/play/ClearTitle.hpp src/protocol/packets/play/CommandSuggestionResponse.hpp src/protocol/packets/play/DeclareCommands.hpp src/protocol/packets/play/CloseInventory.hpp src/protocol/packets/play/InventoryContent.hpp src/protocol/packets/play/InventoryProperty.hpp src/protocol/packets/play/InventorySlot.hpp src/protocol/packets/play/Cooldown.hpp src/protocol/packets/play/PluginMessage.hpp src/protocol/packets/play/CustomSoundEffect.hpp src/protocol/packets/play/Disconnect.hpp src/protocol/packets/play/EntityEvent.hpp src/protocol/packets/play/Explosion.hpp src/protocol/packets/play/UnloadChunk.hpp src/protocol/packets/play/GameEvent.hpp src/protocol/packets/play/OpenHorseInventory.hpp src/protocol/packets/play/InitializeWorldBorder.hpp src/protocol/packets/play/KeepAlive.hpp src/protocol/packets/play/ChunkData.hpp src/protocol/packets/play/WorldEvent.hpp src/protocol/packets/play/Particle.hpp src/protocol/packets/play/ChunkLight.hpp src/protocol/packets/play/JoinGame.hpp src/protocol/packets/play/MapData.hpp src/protocol/packets/play/MerchantOffer.hpp src/protocol/packets/play/EntityPosition.hpp src/protocol/packets/play/EntityPositionAndRotation.hpp src/protocol/packets/play/EntityRotation.hpp src/protocol/packets/play/MoveVehicle.hpp src/protocol/packets/play/OpenBook.hpp src/protocol/packets/play/OpenInventory.hpp src/protocol/packets/play/OpenSignEditor.hpp src/protocol/packets/play/Ping.hpp src/protocol/packets/play/PlaceRecipeResponse.hpp src/protocol/packets/play/PlayerAbilities.hpp src/protocol/packets/play/Fly.hpp src/protocol/packets/play/ServerPlayerChat.hpp src/protocol/packets/play/OpenRespawnScreen.hpp src/protocol/packets/play/PlayerListItem.hpp src/protocol/packets/play/EntityLookAt.hpp src/protocol/packets/play/PositionRotation.hpp src/protocol/packets/play/PlayerAction.hpp src/protocol/packets/play/EntityAction.hpp src/protocol/packets/play/PlayerInput.hpp src/protocol/packets/play/ChangeRecipeBookSettings.hpp src/protocol/packets/play/SeenRecipe.hpp src/protocol/packets/play/RenameItem.hpp src/protocol/packets/play/ResourcePackRequest.hpp src/protocol/packets/play/ResourcePackResponse.hpp src/protocol/packets/play/RemoveEntities.hpp src/protocol/packets/play/RemoveEntityEffect.hpp src/protocol/packets/play/Respawn.hpp src/protocol/packets/play/SectionBlocks.hpp src/protocol/packets/play/SelectAdvancementsTab.hpp src/protocol/packets/play/ServerData.hpp src/protocol/packets/play/ActionBar.hpp src/protocol/packets/play/BorderCenter.hpp src/protocol/packets/play/BorderRadiusSpeed.hpp src/protocol/packets/play/BorderRadius.hpp src/protocol/packets/play/BorderWarningTime.hpp src/protocol/packets/play/BorderWarningRadius.hpp src/protocol/packets/play/Camera.hpp src/protocol/packets/play/HeldSlot.hpp src/protocol/packets/play/ViewPosition.hpp src/protocol/packets/play/RenderDistance.hpp src/protocol/packets/play/DisplayObjective.hpp src/protocol/packets/play/EntityMetadata.hpp src/protocol/packets/play/LeadEntities.hpp src/protocol/packets/play/EntityVelocity.hpp src/protocol/packets/play/Equipment.hpp src/protocol/packets/play/Experience.hpp src/protocol/packets/play/Health.hpp src/protocol/packets/play/Objectives.hpp src/protocol/packets/play/Passengers.hpp src/protocol/packets/play/Teams.hpp src/protocol/packets/play/Score.hpp src/protocol/packets/play/SimulationDistance.hpp src/protocol/packets/play/Subtitle.hpp src/protocol/packets/play/WorldTime.hpp src/protocol/packets/play/Title.hpp src/protocol/packets/play/TitleTimes.hpp src/protocol/packets/play/EntitySoundEffect.hpp src/protocol/packets/play/HardcodedSoundEffect.hpp src/protocol/packets/play/StopSound.hpp src/protocol/packets/play/SystemChat.hpp src/protocol/packets/play/TabHeaderFooter.hpp src/protocol/packets/play/TagQueryResponse.hpp src/protocol/packets/play/PickupItem.hpp src/protocol/packets/play/TeleportEntity.hpp src/protocol/packets/play/Advancements.hpp src/protocol/packets/play/Attributes.hpp src/protocol/packets/play/EntityEffect.hpp src/protocol/packets/play/Recipes.hpp src/protocol/packets/play/ConfirmTeleport.hpp src/protocol/packets/play/TagQueryRequest.hpp src/protocol/packets/play/ClientChangeDifficulty.hpp src/protocol/packets/play/Command.hpp src/protocol/packets/play/SignedChat.hpp src/protocol/packets/play/UnsignedMessage.hpp src/protocol/packets/play/ClientAction.hpp src/protocol/packets/play/ClientSettings.hpp src/protocol/packets/play/CommandSuggestionRequest.hpp src/protocol/packets/play/ClickSlot.hpp src/protocol/packets/play/ClickInventoryButton.hpp src/protocol/packets/play/EditBook.hpp src/protocol/packets/play/BlockTagQueryRequest.hpp src/protocol/packets/play/EntityInteract.hpp src/protocol/packets/play/GenerateJigsaw.hpp src/protocol/packets/play/LockDifficulty.hpp src/protocol/packets/play/Move.hpp src/protocol/packets/play/MovePositionOnly.hpp src/protocol/packets/play/MoveRotationOnly.hpp src/protocol/packets/play/MoveGroundOnly.hpp src/protocol/packets/play/BoatPaddle.hpp src/protocol/packets/play/PickItem.hpp src/protocol/packets/play/LegacyChat.hpp src/network/connector/Connector.hpp src/network/eventloop/EventLoop.hpp src/network/eventloop/AbstractEventLoop.cpp src/network/eventloop/EpollEventLoop.cpp src/network/connector/EpollConnector.cpp src/protocol/data/nbt/ByteTag.cpp src/protocol/data/nbt/ShortTag.cpp src/protocol/data/nbt/IntTag.cpp src/protocol/data/nbt/LongTag.cpp src/protocol/data/nbt/FloatTag.cpp src/protocol/data/nbt/DoubleTag.cpp src/protocol/data/nbt/ByteArrayTag.cpp src/protocol/data/nbt/ListTag.cpp src/protocol/data/nbt/CompoundTag.cpp src/protocol/data/nbt/IntArrayTag.cpp src/protocol/data/nbt/LongArrayTag.cpp src/protocol/handlers/AbstractPacketHandler.cpp src/protocol/ProtocolUtils.cpp src/protocol/ProtocolUtils.hpp src/network/readwritecloser/UnixReadWriteCloser.cpp src/protocol/packets/prepared/PreparedPacket.hpp src/protocol/packets/prepared/SingleVersionPreparedPacket.hpp src/protocol/registry/BuiltInPacketRegistry.hpp src/protocol/registry/BuiltInPacketRegistry.cpp src/network/readwritecloser/ReadWriteCloser.hpp src/protocol/packets/login/LoginPluginMessage.hpp src/protocol/packets/login/LoginPluginResponse.hpp src/protocol/packets/play/LegacyTitle.hpp src/protocol/packets/play/PlayerChat.hpp src/protocol/packets/play/DefaultSpawnPosition.hpp src/protocol/packets/play/SpawnThunderbolt.hpp src/protocol/packets/play/SpawnPainting.hpp src/protocol/packets/play/ConfirmTransaction.hpp src/protocol/packets/play/CombatEvent.hpp src/protocol/packets/play/UseBed.hpp src/protocol/packets/play/UnlockRecipes.hpp src/protocol/packets/play/EntityEffectRemove.hpp src/protocol/packets/play/EntityRemove.hpp src/protocol/packets/play/CraftRecipeRequest.hpp src/protocol/packets/play/CraftRecipeResponse.hpp src/protocol/packets/play/LegacyWorldBorder.hpp src/protocol/packets/play/EntityNotMoved.hpp src/protocol/packets/play/EntityEquipment.hpp src/protocol/packets/play/EntityTeleport.hpp src/protocol/packets/play/EntityProperties.hpp src/protocol/packets/play/LegacyEnchant.hpp src/protocol/packets/play/Digging.hpp src/protocol/packets/play/LegacyRecipeBook.hpp src/protocol/packets/play/CreativeSlot.hpp src/protocol/packets/play/EditSign.hpp src/protocol/packets/play/SwingArm.hpp src/protocol/packets/play/PlaceBlock.hpp src/protocol/packets/play/UseItem.hpp src/protocol/packets/play/Spectate.hpp src/protocol/packets/play/Tags.hpp src/protocol/packets/play/SelectTrade.hpp src/protocol/packets/play/BeaconEffect.hpp src/protocol/packets/play/ProgramCommandBlock.hpp src/protocol/packets/play/ProgramCommandBlockMinecart.hpp src/protocol/packets/play/ProgramStructureBlock.hpp src/protocol/packets/play/ProgramJigsawBlock.hpp src/protocol/packets/play/TradeList.hpp src/protocol/packets/play/PlayerFace.hpp src/protocol/packets/play/ViewDistance.hpp src/protocol/packets/play/GenerateStructure.hpp src/protocol/data/profile/GameProfile.cpp src/protocol/data/profile/GameProfile.hpp src/protocol/data/world/World.hpp src/protocol/data/world/Chunk.cpp src/protocol/data/world/World.cpp src/protocol/data/world/Dimension.cpp src/protocol/data/world/Block.cpp src/protocol/data/world/Biome.cpp src/protocol/data/player/Player.cpp src/protocol/data/player/Player.hpp src/protocol/data/uuid/UUID.cpp src/protocol/data/uuid/UUID.hpp)

# TODO
set(CMAKE_C_COMPILER "clang")
set(CMAKE_CXX_COMPILER "clang++")

set(CMAKE_CXX_FLAGS "-O2 -fPIC -fomit-frame-pointer -funroll-loops -D_FORTIFY_SOURCE=2 -fstack-protector-strong -fstack-clash-protection -fPIE -Wall -Werror")
target_link_libraries(Ship "-Wl,-z,relro -Wl,-z,now -Wl,-z,noexecstack -Wl,-z,separate-code -fuse-ld=lld -ldeflate")
